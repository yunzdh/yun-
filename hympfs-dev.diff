
@@ -413,9 +379,34 @@ jobs:
             cp ../../zzh_patch/5.10-patch/fdinfo.c.patch ./
             patch -p1 < fdinfo.c.patch
           fi
-  
+      - name: HymoFS 补丁
+        if: ${{ inputs.android_version == 'android14' || inputs.android_version == 'android15' }}
+        run: |
+          cd "$CONFIG/common"
+          VERSION="${{ inputs.android_version }}"
+
+          echo "Detected Version: $VERSION"
+
+          if [ "$VERSION" = "android14" ]; then
+          # 6.1
+            echo "对 GKI 6.1 进行补丁"
+            wget https://raw.githubusercontent.com/Anatdx/HymoFS/refs/heads/android14_6.1/patch/hymofs_with_susfs.patch
+            patch -p1 -F 3 < hymofs_with_susfs.patch
+            echo "CONFIG_HYMOFS=y" >> arch/arm64/configs/gki_defconfig
+          elif [ "$VERSION" = "android15" ]; then
+          # 6.6
+            echo "对 GKI 6.6 进行补丁"
+            wget https://raw.githubusercontent.com/Anatdx/HymoFS/refs/heads/android15_6.6/patch/hymofs_with_susfs.patch
+            patch -p1 -F 3 < hymofs_with_susfs.patch
+            echo "CONFIG_HYMOFS=y" >> arch/arm64/configs/gki_defconfig
+           
+           
+          else
+            echo "Error: Unsupported version: $VERSION"
+            exit 1
+          fi
+
      
 
       - name: 配置内核构时间/删除dirty字符
         run: |
@@ -790,7 +755,8 @@ jobs:
           if [ "${{ inputs.kernel_version }}" != "6.6" ]; then
             echo "Patching Image file..."
             cd "$CONFIG/out/${{ inputs.android_version }}-${{ inputs.kernel_version }}/dist"
-            curl -LSs "https://raw.githubusercontent.com/ShirkNeko/SukiSU_patch/refs/heads/main/kpm/patch_linux" -o patch
+            # curl -LSs "https://raw.githubusercontent.com/ShirkNeko/SukiSU_patch/refs/heads/main/kpm/patch_linux" -o patch
+            curl -LSs "https://raw.githubusercontent.com/zzh20188/GKI_KernelSU_SUSFS/refs/heads/hymo/tmp-kpmtool/patch_linux" -o patch
             chmod 777 patch
             ./patch
             rm -rf Image
@@ -804,7 +770,8 @@ jobs:
 
             echo "Patching Image file..."
             cd "$CONFIG/bazel-bin/common/kernel_aarch64/"
-            curl -LSs "https://raw.githubusercontent.com/ShirkNeko/SukiSU_patch/refs/heads/main/kpm/patch_linux" -o patch
+            # curl -LSs "https://raw.githubusercontent.com/ShirkNeko/SukiSU_patch/refs/heads/main/kpm/patch_linux" -o patch
+            curl -LSs "https://raw.githubusercontent.com/zzh20188/GKI_KernelSU_SUSFS/refs/heads/hymo/tmp-kpmtool/patch_linux" -o patch
             chmod 777 patch
             ./patch
             rm -rf Image
diff --git a/.github/workflows/test_release.yml b/.github/workflows/test_release.yml
index c4c2633..d368cef 100644
--- a/.github/workflows/test_release.yml
+++ b/.github/workflows/test_release.yml
@@ -7,6 +7,11 @@ permissions:
 on:
   workflow_dispatch:
     inputs:
+      make_release:
+        description: 'Do you want to create a release?'
+        required: true
+        type: boolean
+        default: true
       kernelsu_variant:
         # description: "选择 KernelSU | 注意:选中MKSU时为标准版"
         description: "选择 KernelSU"
@@ -50,11 +55,6 @@ on:
         required: true
         type: boolean
         default: true
-      cancel_susfs:
-        description: '取消susfs'
-        required: true
-        type: boolean
-        default: false
       get_manager:
         description: '是否同时获取最新KSU管理器?'
         required: true
@@ -67,18 +67,18 @@ jobs:
     with:
       kernelsu_variant: ${{ inputs.kernelsu_variant }}
 
-  build-kernel-a12-5-10:
-    uses: ./.github/workflows/kernel-a12-5.10.yml
-    secrets: inherit
-    with:
-      kernelsu_variant: ${{ inputs.kernelsu_variant }}
-      kernelsu_branch: ${{ inputs.kernelsu_branch }}
-      # # kernelsu_branch_other: ${{ inputs.kernelsu_branch_other }}
-      version: ${{ inputs.version }}
-      use_zram: ${{ inputs.use_zram }}
-      use_kpm: ${{ inputs.use_kpm }}
-      use_bbg: ${{ inputs.use_bbg }}
-      cancel_susfs: ${{ inputs.cancel_susfs }}
+  # build-kernel-a12-5-10:
+  #   uses: ./.github/workflows/kernel-a12-5.10.yml
+  #   secrets: inherit
+  #   with:
+  #     make_release: true
+  #     kernelsu_variant: ${{ inputs.kernelsu_variant }}
+  #     kernelsu_branch: ${{ inputs.kernelsu_branch }}
+  #     # # kernelsu_branch_other: ${{ inputs.kernelsu_branch_other }}
+  #     version: ${{ inputs.version }}
+  #     use_zram: ${{ inputs.use_zram }}
+  #     use_kpm: ${{ inputs.use_kpm }}
+  #     use_bbg: ${{ inputs.use_bbg }}
 
   # build-kernel-a13-5-10:
   #   uses: ./.github/workflows/kernel-a13-5.10.yml
@@ -92,18 +92,18 @@ jobs:
   #     use_zram: ${{ inputs.use_zram }}
   #     use_kpm: ${{ inputs.use_kpm }}
 
-  build-kernel-a13-5-15:
-    uses: ./.github/workflows/kernel-a13-5.15.yml
-    secrets: inherit
-    with:
-      kernelsu_variant: ${{ inputs.kernelsu_variant }}
-      kernelsu_branch: ${{ inputs.kernelsu_branch }}
-      # kernelsu_branch_other: ${{ inputs.kernelsu_branch_other }}
-      version: ${{ inputs.version }}
-      use_zram: ${{ inputs.use_zram }}
-      use_kpm: ${{ inputs.use_kpm }}
-      use_bbg: ${{ inputs.use_bbg }}
-      cancel_susfs: ${{ inputs.cancel_susfs }}
+  # build-kernel-a13-5-15:
+  #   uses: ./.github/workflows/kernel-a13-5.15.yml
+  #   secrets: inherit
+  #   with:
+  #     make_release: ${{ inputs.make_release }}
+  #     kernelsu_variant: ${{ inputs.kernelsu_variant }}
+  #     kernelsu_branch: ${{ inputs.kernelsu_branch }}
+  #     # kernelsu_branch_other: ${{ inputs.kernelsu_branch_other }}
+  #     version: ${{ inputs.version }}
+  #     use_zram: ${{ inputs.use_zram }}
+  #     use_kpm: ${{ inputs.use_kpm }}
+  #     use_bbg: ${{ inputs.use_bbg }}
 
   # build-kernel-a14-5-15:
   #   uses: ./.github/workflows/kernel-a14-5.15.yml
@@ -121,6 +121,7 @@ jobs:
     uses: ./.github/workflows/kernel-a14-6.1.yml
     secrets: inherit
     with:
+      make_release: ${{ inputs.make_release }}
       kernelsu_variant: ${{ inputs.kernelsu_variant }}
       kernelsu_branch: ${{ inputs.kernelsu_branch }}
       # kernelsu_branch_other: ${{ inputs.kernelsu_branch_other }}
@@ -128,12 +129,12 @@ jobs:
       use_zram: ${{ inputs.use_zram }}
       use_kpm: ${{ inputs.use_kpm }}
       use_bbg: ${{ inputs.use_bbg }}
-      cancel_susfs: ${{ inputs.cancel_susfs }}
 
   build-kernel-a15-6-6:
     uses: ./.github/workflows/kernel-a15-6.6.yml
     secrets: inherit
     with:
+      make_release: ${{ inputs.make_release }}
       kernelsu_variant: ${{ inputs.kernelsu_variant }}
       kernelsu_branch: ${{ inputs.kernelsu_branch }}
       # kernelsu_branch_other: ${{ inputs.kernelsu_branch_other }}
@@ -141,7 +142,6 @@ jobs:
       use_zram: ${{ inputs.use_zram }}
       use_kpm: ${{ inputs.use_kpm }}
       use_bbg: ${{ inputs.use_bbg }}
-      cancel_susfs: ${{ inputs.cancel_susfs }}
 
   trigger-release:
     runs-on: ubuntu-latest
@@ -150,12 +150,13 @@ jobs:
       actions: write
     needs:
         - get_manager
-        - build-kernel-a12-5-10
+        # - build-kernel-a12-5-10
         # - build-kernel-a13-5-10
-        - build-kernel-a13-5-15
+        # - build-kernel-a13-5-15
         # - build-kernel-a14-5-15
         - build-kernel-a14-6-1
         - build-kernel-a15-6-6
+    if: ${{ inputs.make_release }}
     env:
       REPO_OWNER: zzh20188
       REPO_NAME: GKI_KernelSU_SUSFS
@@ -163,6 +164,14 @@ jobs:
       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
       RELEASE_NAME: "GKI内核: ${{ inputs.kernelsu_variant == 'Next' && 'KernelSU-' || '' }}${{ inputs.kernelsu_variant }}(${{ needs.get_manager.outputs.ksuVer }})  & SUSFS ${{ needs.get_manager.outputs.susVer }}"
       RELEASE_NOTES: |
+        Add [Hymo](https://github.com/Anatdx/hymo) hybrid mount meta-module (GKI 6.1/6.6 only).  
+        **Note:** Stability has not been fully verified; user testing is required.  
+        Please provide feedback at: [zzh20188/GKI_KernelSU_SUSFS/issues](https://github.com/zzh20188/GKI_KernelSU_SUSFS/issues)
+        ----------------------------------------
+        添加 [Hymo](https://github.com/Anatdx/hymo) 混合挂载元模块（仅限 GKI 6.1/6.6）。  
+        **注意：** 稳定性尚未完全验证，需用户自行测试。  
+        反馈建议请至：[此处](https://github.com/zzh20188/GKI_KernelSU_SUSFS/issues)
+        ----------------------------------------
         此处包含：**${{ inputs.kernelsu_variant == 'Next' && 'KernelSU-' || '' }}${{ inputs.kernelsu_variant }}**、SUSFS ${{ needs.get_manager.outputs.susVer }} ${{ inputs.use_zram && '、LZ4KD' || '' }}
 
         功能:
